<main class="page-content">
  <div class="container xl">
    <div class="actions-subtitle">
      <h2>TpRates list</h2>
      <ul class="actions">
        {{tp-index-buttons
          model=model
          tariffPlanId=tariffPlanId
          permittedFilters=permittedFilters
          refresh="refresh"
          controller=this
        }}
      </ul>
    </div>
    {{total-records totalRecords=meta.total_records}}
    <div class="row">
      <div class=" col-md-9">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                {{sort-header
                  label="ID"
                  key="id"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Tag"
                  key="tag"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                  data-test-sort-tag=true
                }}
                {{sort-header
                  label="Rate unit"
                  key="rateUnit"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Rate increment"
                  key="rateIncrement"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Rate"
                  key="rate"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Group interval start"
                  key="groupIntervalStart"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Connect fee"
                  key="connectFee"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Created at"
                  key="createdAt"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                <td>Actions</td>
              </tr>
            </thead>
            <tbody>
              {{#each model as |tpRate|}}
                <tr>
                  <td>
                    {{#link-to "tariff-plan.tp-rates.tp-rate" tpRate}}{{tpRate.id}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-rates.tp-rate" tpRate}}{{tpRate.tag}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-rates.tp-rate" tpRate}}{{tpRate.rateUnit}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-rates.tp-rate" tpRate}}{{tpRate.rateIncrement}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-rates.tp-rate" tpRate}}{{tpRate.rate}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-rates.tp-rate" tpRate}}{{tpRate.groupIntervalStart}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-rates.tp-rate" tpRate}}{{tpRate.connectFee}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-rates.tp-rate" tpRate}}{{moment-format tpRate.createdAt}}{{/link-to}}
                  </td>
                  <td class="actions">
                    {{#link-to "tariff-plan.tp-rates.tp-rate.edit" tpRate}}
                      <i class="material-icons circle btn btn-primary" data-test-tp-rate-edit>edit</i>
                    {{/link-to}}
                    <a {{action "remove" tpRate}} class="ml-1" role="button">
                      <i class="material-icons circle btn btn-danger" data-test-tp-rate-remove>remove</i>
                    </a>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
        {{page-numbers content=pagination action="toPage" showFL=true numPagesToShow=4}}
      </div>
      <div class="col-md-3">
        {{#filters-block search=(action "search") as |filtersBlock|}}
          {{filter-text
            label="Tag"
            key="tag"
            value=tag
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-tag=true
          }}
          {{filter-seconds
            label="Rate unit"
            key="rateUnit"
            value=rateUnit
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-rate-unit=true
          }}
          {{filter-seconds
            label="Rate increment"
            key="rateIncrement"
            value=rateIncrement
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-rate-increment=true
          }}
          {{filter-number
            label="Rate (value)"
            key="rate"
            value=rate
            onValueChange=(action "pushValue" target=filtersBlock)
            step="0.0001"
            min="0"
            data-test-filter-rate=true
          }}
          {{filter-seconds
            label="Group interval start"
            key="groupIntervalStart"
            value=groupIntervalStart
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-group-interval-start=true
          }}
          {{filter-number
            label="Connect fee"
            key="connectFee"
            value=connectFee
            onValueChange=(action "pushValue" target=filtersBlock)
            step="0.0001"
            min="0"
            data-test-filter-connect-fee=true
          }}
        {{/filters-block}}
      </div>
    </div>
  </div>
</main>