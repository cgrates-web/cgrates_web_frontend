<main class="page-content">
  <div class="container xl">
    <div class="actions-subtitle">
      <h2>TpDerivedChargers list</h2>
      <ul class="actions">
        {{tp-index-buttons
          model=model
          tariffPlanId=tariffPlanId
          permittedFilters=permittedFilters
          refresh="refresh"
          controller=this
        }}
      </ul>
    </div>
    {{total-records totalRecords=meta.total_records}}
    <div class="row">
      <div class=" col-md-9">
        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
            <tr>
              {{sort-header
                label="ID"
                key="id"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
              }}
              {{sort-header
                label="Load ID"
                key="loadid"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
              }}
              {{sort-header
                label="Direction"
                key="direction"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
              }}
              {{sort-header
                label="Tenant"
                key="tenant"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
                data-test-sort-tenant=true
              }}
              {{sort-header
                label="Category"
                key="category"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
              }}
              {{sort-header
                label="Account"
                key="account"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
              }}
              {{sort-header
                label="Subject"
                key="subject"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
              }}
              {{sort-header
                label="Destination tags"
                key="destinationIds"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
              }}
              {{sort-header
                label="Created at"
                key="createdAt"
                sortColumn=sortColumn
                sortOrder=sortOrder
                sortAction="sortBy"
              }}
              <td>Actions</td>
            </tr>
            </thead>
            <tbody>
            {{#each model as |tpDerivedCharger|}}
              <tr>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{tpDerivedCharger.id}}{{/link-to}}
                </td>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{tpDerivedCharger.loadid}}{{/link-to}}
                </td>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{tpDerivedCharger.direction}}{{/link-to}}
                </td>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{tpDerivedCharger.tenant}}{{/link-to}}
                </td>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{tpDerivedCharger.category}}{{/link-to}}
                </td>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{tpDerivedCharger.account}}{{/link-to}}
                </td>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{tpDerivedCharger.subject}}{{/link-to}}
                </td>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{tpDerivedCharger.destinationIds}}{{/link-to}}
                </td>
                <td>
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger" tpDerivedCharger}}{{moment-format tpDerivedCharger.createdAt}}{{/link-to}}
                </td>
                <td class="actions">
                  {{#link-to "tariff-plan.tp-derived-chargers.tp-derived-charger.edit" tpDerivedCharger}}
                    <i class="material-icons circle btn btn-primary" data-test-tp-derived-charger-edit>edit</i>
                  {{/link-to}}
                  <a {{action "remove" tpDerivedCharger}} class="ml-1">
                    <i class="material-icons circle btn btn-danger" data-test-tp-derived-charger-remove>remove</i>
                  </a>
                </td>
              </tr>
            {{/each}}
            </tbody>
          </table>
        </div>
        {{page-numbers content=pagination action="toPage" showFL=true numPagesToShow=4}}
      </div>
      <div class="col-md-3">
        {{#filters-block search=(action "search") as |filtersBlock|}}
          {{filter-text
            label="Load ID"
            key="loadid"
            value=loadid
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-loadid=true
          }}
          {{filter-text
            label="Direction"
            key="direction"
            value=direction
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-direction=true
          }}
          {{filter-text
            label="Tenant"
            key="tenant"
            value=tenant
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-tenant=true
          }}
          {{filter-text
            label="Category"
            key="category"
            value=category
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-category=true
          }}
          {{filter-text
            label="Account"
            key="account"
            value=account
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-account=true
          }}
          {{filter-text
            label="Subject"
            key="subject"
            value=subject
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-subject=true
          }}
          {{filter-select-search-to-string
            label='Destination tags'
            key='destinationIds'
            value=destinationIds
            searchModel='tp-destination'
            searchField='tag'
            tpid=tariffPlanId
            multiple=true
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-destination-ids=true
          }}
        {{/filters-block}}
      </div>
    </div>
  </div>
</main>