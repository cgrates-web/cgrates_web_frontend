<main class="page-content">
  <div class="container xxl">
    <div class="actions-subtitle">
      <h2>TpThresholds list</h2>
      <ul class="actions">
        {{tp-index-buttons
          model=model
          tariffPlanId=tariffPlanId
          permittedFilters=permittedFilters
          refresh='refresh'
          controller=this
        }}
      </ul>
    </div>
    {{total-records totalRecords=meta.total_records}}
    <div class="row">
      <div class=" col-md-9">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
            <tr>
              {{sort-header label='ID' key='id' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Tenant' key='tenant' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy' data-test-sort-tenant=true}}
              {{sort-header label='Custom ID' key='customId' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Filter IDs' key='filterIds' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Activation interval' key='activationInterval' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Max hits' key='maxHits' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Min hits' key='minHits' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Min sleep' key='minSleep' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Action IDs' key='actionIds' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Blocker' key='blocker' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Async' key='async' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Weight' key='weight' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}

              {{sort-header label='Created at' key='createdAt' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              <td>Actions</td>
            </tr>
            </thead>
            <tbody>
            {{#each model as |tpThreshold|}}
              <tr>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.id}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.tenant}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.customId}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.filterIds}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.activationInterval}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.maxHits}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.minHits}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.minSleep}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.actionIds}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.blocker}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.async}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}{{tpThreshold.weight}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold' tpThreshold}}
                    {{moment-format tpThreshold.createdAt}}
                  {{/link-to}}
                </td>
                <td class="actions">
                  {{#link-to 'tariff-plan.tp-thresholds.tp-threshold.edit' tpThreshold}}
                    <i class="material-icons circle btn btn-primary" data-test-threshold-edit>edit</i>
                  {{/link-to}}
                  <a {{action 'remove' tpThreshold}} class="ml-1">
                    <i class="material-icons circle btn btn-danger" data-test-threshold-remove>remove</i>
                  </a>
                </td>
              </tr>
            {{/each}}
            </tbody>
          </table>
        </div>
        {{page-numbers content=pagination action='toPage' showFL=true numPagesToShow=4}}
      </div>
      <div class="col-md-3">
        {{#filters-block search=(action 'search') as |filtersBlock|}}
          {{filter-text
            label='Tenant'
            key='tenant'
            value=tenant
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-tenant=true
          }}
          {{filter-text
            label='Custom ID'
            key='customId'
            value=customId
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-customid=true
          }}
          {{filter-text
            label='Filter IDs'
            key='filterIds'
            value=filterIds
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-filter-ids=true
          }}
          {{filter-text
            label='Action IDs'
            key='actionIds'
            value=actionIds
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-action-ids=true
          }}
          {{filter-text
            label='Activation interval'
            key='activationInterval'
            value=activationInterval
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-activation-interval=true
          }}
          {{filter-number
            label='Max hits'
            key='maxHits'
            value=maxHits
            onValueChange=(action 'pushValue' target=filtersBlock)
            min='0'
            data-test-filter-max-hits=true
          }}
          {{filter-number
            label='Min hits'
            key='minHits'
            value=minHits
            onValueChange=(action 'pushValue' target=filtersBlock)
            min='0'
            data-test-filter-min-hits=true
          }}
          {{filter-number
            label='Min slleep'
            key='minSleep'
            value=minSleep
            onValueChange=(action 'pushValue' target=filtersBlock)
            min='0'
            data-test-filter-min-sleep=true
          }}
          {{filter-select
            label='Blocker'
            key='blocker'
            value=blocker
            onValueChange=(action 'pushValue' target=filtersBlock)
            content=selectValues.boolean
            data-test-filter-blocker=true
          }}
          {{filter-select
            label='Async'
            key='async'
            value=async
            onValueChange=(action 'pushValue' target=filtersBlock)
            content=selectValues.boolean
            data-test-filter-async=true
          }}
          {{filter-number
            label='Weight'
            key='weight'
            value=weight
            onValueChange=(action 'pushValue' target=filtersBlock)
            step='0.1'
            min='0'
            data-test-filter-weight=true
          }}
        {{/filters-block}}
      </div>
    </div>
  </div>
</main>