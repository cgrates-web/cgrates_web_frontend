<main class="page-content">
  <div class="container xl">
    <div class="actions-subtitle">
      <h2>Raw Suppliers rates</h2>
      <ul class="actions">
        {{tp-index-buttons
          model=model
          tariffPlanId=tariffPlanId
          permittedFilters=permittedFilters
          refresh='refresh'
          controller=this
        }}
        <li>
          <a {{action 'resolve'}} data-test-resolve>
            <i class="material-icons circle btn btn-secondary">healing</i>
          </a>
        </li>
      </ul>
    </div>
    {{total-records totalRecords=meta.total_records}}
    <div class="row">
      <div class=" col-md-9">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
            <tr>
              {{sort-header label='ID'          key='id'           sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Prefix'      key='prefix'       sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Supplier'    key='supplierName' sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Rate'        key='rate'         sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Description' key='description'  sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              {{sort-header label='Created at'  key='insertedAt'   sortColumn=sortColumn sortOrder=sortOrder sortAction='sortBy'}}
              <td>Actions</td>
            </tr>
            </thead>
            <tbody>
            {{#each model as |rate|}}
              <tr data-test-rate>
                <td>
                  {{#link-to 'tariff-plan.raw-supplier-rates.raw-supplier-rate' rate}}{{rate.id}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.raw-supplier-rates.raw-supplier-rate' rate}}{{rate.prefix}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.raw-supplier-rates.raw-supplier-rate' rate}}{{rate.supplierName}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.raw-supplier-rates.raw-supplier-rate' rate}}{{rate.rate}}{{/link-to}}
                </td>
                <td>
                {{#link-to 'tariff-plan.raw-supplier-rates.raw-supplier-rate' rate}}{{rate.description}}{{/link-to}}
                </td>
                <td>
                  {{#link-to 'tariff-plan.raw-supplier-rates.raw-supplier-rate' rate}}{{moment-format rate.insertedAt}}{{/link-to}}
                </td>
                <td class="actions">
                  {{#link-to 'tariff-plan.raw-supplier-rates.raw-supplier-rate.edit' rate}}
                    <i class="material-icons circle btn btn-primary" data-test-supplier-rate-edit>edit</i>
                  {{/link-to}}
                  <a {{action 'remove' rate}} data-test-supplier-rate-remove>
                    <i class="material-icons circle btn btn-danger">remove</i>
                  </a>
                </td>
              </tr>
            {{/each}}
            </tbody>
          </table>
        </div>
        {{page-numbers content=pagination action='toPage' showFL=true numPagesToShow=4}}
      </div>
      <div class="col-md-3">
        {{#filters-block search=(action 'search') as |filtersBlock|}}
          {{filter-text
            label='Prefix'
            key='prefix'
            value=prefix
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-prefix=true
          }}
          {{filter-text
            label='Supplier'
            key='supplierName'
            value=supplierName
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-supplier=true
          }}
          {{filter-number
            label='rate'
            key='rate'
            value=rate
            onValueChange=(action 'pushValue' target=filtersBlock)
            step='0.0001'
            min='0'
            data-test-filter-rate=true
          }}
          {{filter-date
            label='from'
            key='insertedAtGt'
            value=insertedAtGt
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-inserted-at-gt=true
          }}
          {{filter-date
            label='to'
            key='insertedAtLt'
            value=insertedAtLt
            onValueChange=(action 'pushValue' target=filtersBlock)
            data-test-filter-inserted-at-lt=true
          }}
        {{/filters-block}}
      </div>
    </div>
  </div>
</main>