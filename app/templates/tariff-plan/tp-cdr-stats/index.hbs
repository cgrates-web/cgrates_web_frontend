<main class="page-content">
  <div class="container xxl">
    <div class="actions-subtitle">
      <h2>TpCdrStats list</h2>
      <ul class="actions">
        {{tp-index-buttons
          model=model
          tariffPlanId=tariffPlanId
          permittedFilters=permittedFilters
          refresh="refresh"
          controller=this
        }}
      </ul>
    </div>
    {{total-records totalRecords=meta.total_records}}
    <div class="row">
      <div class=" col-md-9">
        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                {{sort-header
                  label="ID"
                  key="id"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Tag"
                  key="tag"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                  data-test-sort-tag=true
                }}
                {{sort-header
                  label="Metrics"
                  key="metrics"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Tors"
                  key="tors"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Cdr hosts"
                  key="cdrHosts"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Cdr sources"
                  key="cdrSources"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Req types"
                  key="reqTypes"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Directions"
                  key="directions"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Tenants"
                  key="tenants"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Categories"
                  key="categories"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Accounts"
                  key="accounts"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Subjects"
                  key="subjects"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Destination IDs"
                  key="destinationIds"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Suppliers"
                  key="suppliers"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Action triggers"
                  key="actionTriggers"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                {{sort-header
                  label="Created at"
                  key="createdAt"
                  sortColumn=sortColumn
                  sortOrder=sortOrder
                  sortAction="sortBy"
                }}
                <td>Actions</td>
              </tr>
            </thead>
            <tbody>
              {{#each model as |tpCdrStat|}}
                <tr>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.id}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.tag}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.metrics}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.tors}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.cdrHosts}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.cdrSources}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.reqTypes}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.directions}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.tenants}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.categories}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.accounts}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.subjects}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.destinationIds}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.suppliers}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{tpCdrStat.actionTriggers}}{{/link-to}}
                  </td>
                  <td>
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat" tpCdrStat}}{{moment-format tpCdrStat.createdAt}}{{/link-to}}
                  </td>
                  <td class="actions">
                    {{#link-to "tariff-plan.tp-cdr-stats.tp-cdr-stat.edit" tpCdrStat}}
                      <i class="material-icons circle btn btn-primary" data-test-tp-cdr-stat-edit>edit</i>
                    {{/link-to}}
                    <a {{action "remove" tpCdrStat}} class="ml-1" role="button">
                      <i class="material-icons circle btn btn-danger" data-test-tp-cdr-stat-remove>remove</i>
                    </a>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
        {{page-numbers content=pagination action="toPage" showFL=true numPagesToShow=4}}
      </div>
      <div class="col-md-3">
        {{#filters-block search=(action "search") as |filtersBlock|}}
          {{filter-text
            label="Tag"
            key="tag"
            value=tag
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-tag=true
          }}
          {{filter-select
            label="Metrics"
            key="metrics"
            value=metrics
            onValueChange=(action "pushValue" target=filtersBlock)
            content=selectValues.metrics
            data-test-filter-metrics=true
          }}
          {{filter-text
            label="Tors"
            key="tors"
            value=tors
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-tors=true
          }}
          {{filter-text
            label="Cdr hosts"
            key="cdrHosts"
            value=cdrHosts
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-cdr-hosts=true
          }}
          {{filter-text
            label="Cdr sources"
            key="cdrSources"
            value=cdrSources
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-cdr-sources=true
          }}
          {{filter-text
            label="Req types"
            key="reqTypes"
            value=reqTypes
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-req-types=true
          }}
          {{filter-text
            label="Directions"
            key="directions"
            value=directions
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-directions=true
          }}
          {{filter-text
            label="Tenants"
            key="tenants"
            value=tenants
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-tenants=true
          }}
          {{filter-text
            label="Categories"
            key="categories"
            value=categories
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-categories=true
          }}
          {{filter-text
            label="Accounts"
            key="accounts"
            value=accounts
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-accounts=true
          }}
          {{filter-text
            label="Subjects"
            key="subjects"
            value=subjects
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-subjects=true
          }}
          {{filter-text
            label="Suppliers"
            key="suppliers"
            value=suppliers
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-suppliers=true
          }}
          {{filter-select-search-to-string
            label="Destination IDs"
            key="destinationIds"
            value=destinationIds
            searchModel="tp-destination"
            searchField="tag"
            tpid=tariffPlanId
            multiple=true
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-destination-ids=true
          }}
          {{filter-select-search-to-string
            label="Action triggers"
            key="actionTriggers"
            value=actionTriggers
            searchModel="tp-action-trigger"
            searchField="tag"
            tpid=tariffPlanId
            multiple=true
            onValueChange=(action "pushValue" target=filtersBlock)
            data-test-filter-action-triggers=true
          }}
          {{filter-collapse-btn
            label="Other filters"
            collapsed=otherFiltersCollapsed
          }}
          {{#bs-collapse collapsed=otherFiltersCollapsed}}
            {{filter-number
              label="Queue length"
              key="queueLength"
              value=queueLength
              onValueChange=(action "pushValue" target=filtersBlock)
              min="0"
              data-test-filter-queue-length=true
            }}
            {{filter-number
              label="Time window"
              key="timeWindow"
              value=timeWindow
              onValueChange=(action "pushValue" target=filtersBlock)
              min="0"
              data-test-filter-time-window=true
            }}
            {{filter-number
              label="Save interval"
              key="saveInterval"
              value=saveInterval
              onValueChange=(action "pushValue" target=filtersBlock)
              min="0"
              data-test-filter-save-interval=true
            }}
            {{filter-text
              label="Setup interval"
              key="setupInterval"
              value=setupInterval
              onValueChange=(action "pushValue" target=filtersBlock)
              data-test-filter-setup-interval=true
            }}
            {{filter-text
              label="Pdd interval"
              key="pddInterval"
              value=pddInterval
              onValueChange=(action "pushValue" target=filtersBlock)
              data-test-filter-pdd-interval=true
            }}
            {{filter-text
              label="Usage interval"
              key="usageInterval"
              value=usageInterval
              onValueChange=(action "pushValue" target=filtersBlock)
              data-test-filter-usage-interval=true
            }}
            {{filter-text
              label="Disconnect causes"
              key="disconnectCauses"
              value=disconnectCauses
              onValueChange=(action "pushValue" target=filtersBlock)
              data-test-filter-disconnect-causes=true
            }}
            {{filter-text
              label="Mediation run IDs"
              key="mediationRunids"
              value=mediationRunids
              onValueChange=(action "pushValue" target=filtersBlock)
              data-test-filter-mediation-runids=true
            }}
            {{filter-text
              label="Rated accounts"
              key="ratedAccounts"
              value=ratedAccounts
              onValueChange=(action "pushValue" target=filtersBlock)
              data-test-filter-rated-accounts=true
            }}
            {{filter-text
              label="Rated subjects"
              key="ratedSubjects"
              value=ratedSubjects
              onValueChange=(action "pushValue" target=filtersBlock)
              data-test-filter-rated-subjects=true
            }}
            {{filter-text
              label="Cost interval"
              key="costInterval"
              value=costInterval
              onValueChange=(action "pushValue" target=filtersBlock)
              data-test-filter-cost-interval=true
            }}
          {{/bs-collapse}}
        {{/filters-block}}
      </div>
    </div>
  </div>
</main>